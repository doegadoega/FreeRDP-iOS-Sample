# AI セッションログ記録システム ルール 📝

## 📋 基本ルール

### 1. 記録フォーマット
- **形式**: Markdown（`.md`）
- **ファイル名**: `YYYYMMDD-HHMM.md`（セッション開始日時）
- **場所**: `docs/development-logs/`
- **更新方針**: **追加のみ、既存ログは変更禁止**

### 2. 必須記録項目

#### セッション基本情報
- AIモデル名・バージョン
- セッション開始/終了時刻
- 指示者（GitHubアカウント）
- 受けた指示内容（原文）
- 作業時間（各タスク別）
- リトライ回数・エラー詳細

#### 技術作業詳細
- 作成ファイル一覧
- 更新ファイル一覧
- 実行コマンド詳細
- エラー内容と解決方法
- 参考リソース/URL

#### 環境・パフォーマンス
- 作業環境（OS、Xcode等）
- 実行時間・トークン使用量
- 依存関係の変更
- セキュリティ関連注意事項

## 📊 標準ログテンプレート

```markdown
# セッションログ - YYYY/MM/DD HH:MM〜

## 📋 セッション基本情報
- **AIモデル**: claude-4-sonnet-thinking
- **開始時刻**: YYYY/MM/DD HH:MM
- **終了時刻**: YYYY/MM/DD HH:MM
- **作業時間**: XX分
- **指示者**: @github-username
- **セッション状況**: [進行中/完了/中断/エラー]

## 🎯 受けた指示
```
[ユーザーからの指示内容をそのまま記録]
```

## ⏱️ 作業時系列

### HH:MM - タスク1: [タスク名]
- **所要時間**: X分
- **リトライ回数**: X回
- **状況**: [成功/失敗/部分完了]

#### 実行コマンド
```bash
[実際に実行したコマンド]
```

#### ファイル操作
- **新規作成**: 
  - `path/to/file.ext`
- **更新**: 
  - `path/to/file.ext` (Line XX-XX)
- **削除**: 
  - `path/to/file.ext`

#### エラー・問題
```
[エラーメッセージ詳細]
```
**解決方法**: [対処内容]

---

## 🔧 環境情報
- **OS**: macOS X.X.X
- **Xcode**: X.X.X
- **その他ツール**: [バージョン情報]

## 📚 参考リソース
- [Title](URL)
- [Title](URL)

## 🚀 成果・影響
- [達成できたこと]
- [残された課題]
- [次回への影響]

## 📋 次回引き継ぎ
### 🔥 最優先
- [項目]
### ⚡ 高優先
- [項目]
### 📋 中優先
- [項目]

---
**記録者**: AI Assistant (claude-4-sonnet-thinking)
```

## 📈 追加推奨記録項目

### パフォーマンス指標
- **思考時間**: 各タスクでの検討時間
- **実行成功率**: 1発成功 vs リトライ必要
- **複雑度評価**: 簡単/普通/難しい/非常に難しい

### 技術的詳細
- **アーキテクチャ変更**: ARM64/x86_64等
- **ビルド環境変更**: 依存関係の追加/削除
- **セキュリティ考慮事項**: 認証情報、API keys等

### 学習・発見事項
- **新しく学んだ技術知識**
- **有効だった解決アプローチ**
- **避けるべきアプローチ**

### コミュニケーション
- **ユーザーへの質問**: 確認が必要だった項目
- **意思決定**: 選択肢があった場合の判断基準
- **提案**: ユーザーに提示した代替案

## 🗂️ ログ管理システム

### インデックスファイル管理
- `docs/development-logs/INDEX.md`: 全セッションの一覧
- 日付順、指示者別、作業内容別の索引

### 検索・参照用
- **タグシステム**: `#build-error` `#rdp-connection` `#library-update`
- **関連セッション参照**: 前回の関連作業へのリンク

## 🚨 重要な注意事項

### 絶対に守るべきルール
1. **既存ログファイルは絶対に編集しない**
2. **エラーログは省略せず完全記録**
3. **作業時間は正確に記録**（開始〜終了時刻）
4. **リトライ内容も詳細記録**
5. **セキュリティ情報は適切にマスク**
6. **⭐ コミット前に必ず作業レポート作成** ← **新ルール**

### コミット時必須作業フロー 🔄

#### Step 1: 作業レポート作成
```bash
# 1. 現在時刻でログファイル作成
date '+%Y%m%d-%H%M'  # → 20250524-1321
touch docs/development-logs/[YYYYMMDD-HHMM].md

# 2. 標準テンプレートを使用してレポート作成
# 必須記録項目：
# - セッション基本情報
# - 受けた指示（原文）
# - 作業時系列（時刻付き）
# - ファイル変更詳細
# - エラー・解決方法
# - 次回引き継ぎ事項
```

#### Step 2: ファイルのステージング
```bash
# 作業レポートを最初にコミット
git add docs/development-logs/[YYYYMMDD-HHMM].md

# その他の変更ファイルを追加
git add [変更したファイル...]
```

#### Step 3: コミットメッセージ
```bash
# フォーマット：[種別]: [要約] - [詳細]
git commit -m "[種別]: [変更要約] - [主要変更点を簡潔に]"

# 例：
# "feat: FreeRDPBridge実装改良 - ネットワーク接続テスト追加、エラーハンドリング強化"
# "fix: OpenSSLビルドエラー解決 - CMake設定修正、iOS向け最適化"
# "docs: AIセッション管理記事更新 - セーフティシステム詳細追加"
```

#### Step 4: INDEXファイル更新
```bash
# development-logs/INDEX.md に新セッションを追加
# - 日時、ファイル名、指示者、主要作業、AI、状況、時間
# - タグ別索引更新
# - 統計情報更新
```

### コミット種別分類
- **feat**: 新機能追加
- **fix**: バグ修正
- **docs**: ドキュメント更新
- **refactor**: コード整理（機能変更なし）
- **test**: テスト追加・修正
- **chore**: その他（ビルド、設定等）
- **security**: セーフティ・セキュリティ関連

### 品質基準
- **再現可能性**: 他の人が同じ作業を再現できるレベル
- **トレーサビリティ**: なぜその判断をしたかが明確
- **完全性**: セッション中のすべての作業を網羅
- **継続性**: 次回セッションが5分で開始できる情報

---

**このルール自体の更新**: プロジェクトの成長に応じて改良  
**最終更新**: 2025/05/24 12:30  
**策定者**: AI Assistant + User Requirements 